window.__require=function e(t,i,n){function o(a,c){if(!i[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var m="function"==typeof __require&&__require;if(!c&&m)return m(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var h=i[a]={exports:{}};t[a][0].call(h.exports,function(e){return o(t[a][1][e]||e)},h,h.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({Asteroid:[function(e,t){"use strict";cc._RF.push(t,"03f78wBTBhFlKpKlJJoI4bi","Asteroid"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(){this.speed=100+100*Math.random()},update:function(e){game.gameType!==game.GameTypePlaying&&game.gameType!==game.GameTypeOver||(this.node.y=this.node.y-this.speed*e,this.node.angle+=1,this.node.angle>=359&&(this.node.angle=0)),this.node.y<=-654&&game.onAsteroidKilled(this.node)}}),cc._RF.pop()},{}],Bullet:[function(e,t){"use strict";cc._RF.push(t,"4c3bd7CN75CoJFhD8oAd9KW","Bullet"),cc.Class({extends:cc.Component,properties:{soundBullet:cc.AudioClip},onLoad:function(){},start:function(){},onCollisionEnter:function(e,t){if(11===t.tag&&game.onBulletKilled(t.node),1===e.tag)(i=e.node.getComponent("Enemy_1"))&&!1===i.isDie&&(cc.log("onCollisionEnter - hit"),i.hit());else if(2===e.tag)(i=e.node.getComponent("Enemy_2"))&&!1===i.isDie&&(cc.log("onCollisionEnter - hit"),i.hit());else if(3===e.tag){var i;(i=e.node.getComponent("Enemy_3"))&&!1===i.isDie&&(cc.log("onCollisionEnter - hit"),i.hit())}},update:function(){game.gameType!==game.GameTypePlaying&&game.gameType!==game.GameTypeOver||(this.node.y=this.node.y+8),this.node.y>=590&&game.onBulletKilled(this.node)}}),cc._RF.pop()},{}],Enemy_1:[function(e,t){"use strict";cc._RF.push(t,"bff25Nt18xI7Kx+/VtRKdmy","Enemy_1"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.init()},init:function(){this.isDie=!1,this.speed=200+800*Math.random(),this.getComponent(cc.Animation).play("enemyNormal_1")},hit:function(){this.isDie=!0;var e=this.getComponent(cc.Animation);e.play("enemyDie_1"),game.playSoundEnemyDie(),e.over=function(){cc.log("executed over function..."),game.onEnemyKilled(this.node,1),game.addScore(100)}},update:function(e){this.isDie||(game.gameType!==game.GameTypePlaying&&game.gameType!==game.GameTypeOver||(this.node.y=this.node.y-this.speed*e),this.node.y<=-654&&game.onEnemyKilled(this.node,1))}}),cc._RF.pop()},{}],Enemy_2:[function(e,t){"use strict";cc._RF.push(t,"2b86265xptEK55xzRCbXl+v","Enemy_2"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.init()},init:function(){this.hp=8,this.speed=150+300*Math.random(),this.isDie=!1,this.normal()},normal:function(){this.getComponent(cc.Animation).play("enemyNormal_2")},hit:function(){if(this.hp--,this.hp<=0)return this.isDie=!0,this.die(),void game.playSoundEnemyDie();var e=this.getComponent(cc.Animation);e.over=function(){this.normal()}.bind(this),e.play("enemyHit_2")},die:function(){var e=this.getComponent(cc.Animation);e.over=function(){game.onEnemyKilled(this.node,2),game.addScore(200)},e.play("enemyDie_2")},update:function(e){this.isDie||(game.gameType!==game.GameTypePlaying&&game.gameType!==game.GameTypeOver||(this.node.y=this.node.y-this.speed*e),this.node.y<=-654&&game.onEnemyKilled(this.node,2))}}),cc._RF.pop()},{}],Enemy_3:[function(e,t){"use strict";cc._RF.push(t,"99bd85fzjZH/Y+J5/HYlmwt","Enemy_3"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.init()},init:function(){this.hp=12,this.speed=100+400*Math.random(),this.isDie=!1,this.normal()},normal:function(){this.getComponent(cc.Animation).play("enemyNormal_3")},hit:function(){if(this.hp--,this.hp<=0)return this.isDie=!0,this.die(),void game.playSoundEnemyDie();var e=this.getComponent(cc.Animation);e.over=function(){this.normal()}.bind(this),e.play("enemyHit_3")},die:function(){var e=this.getComponent(cc.Animation);e.over=function(){game.onEnemyKilled(this.node,3),game.addScore(500)},e.play("enemyDie_3")},update:function(e){this.isDie||(game.gameType!==game.GameTypePlaying&&game.gameType!==game.GameTypeOver||(this.node.y=this.node.y-this.speed*e),this.node.y<=-715&&game.onEnemyKilled(this.node,3))}}),cc._RF.pop()},{}],Game:[function(e,t){"use strict";cc._RF.push(t,"e4e9drgiY9GM63heUgrYS22","Game"),cc.Class({extends:cc.Component,properties:{bg_1:cc.Node,bg_2:cc.Node,bg_comet:cc.Node,bg_star_red:cc.Node,bg_dust_yellow:cc.Node,bg_dust_blue:cc.Node,gameReady:cc.Node,gamePlaying:cc.Node,gamePause:cc.Node,gamePopup:cc.Node,gameOver:cc.Node,hero:cc.Node,pre_asteroid:cc.Prefab,pre_bullet:cc.Prefab,pre_enemy_1:cc.Prefab,pre_enemy_2:cc.Prefab,pre_enemy_3:cc.Prefab,pre_game_popup:cc.Prefab,asteroidTime:cc.Integer,asteroidPool:cc.NodePool,bulletTime:cc.Integer,bulletPool:cc.NodePool,bg_comet_time:cc.Integer,bg_star_red_time:cc.Integer,gameType:cc.Integer,GameTypeReady:cc.Integer,GameTypePlaying:cc.Integer,GameTypePause:cc.Integer,GameTypePopup:cc.Integer,GameTypeOver:cc.Integer,lab_score:cc.Label,lab_final_score:cc.Label,lab_bestScore:cc.Label,lab_question:cc.Label,editbox_answer:cc.EditBox,bgm:cc.AudioClip,soundDieEnemy:cc.AudioClip,soundDieHero:cc.AudioClip,soundAndwerCorrect:cc.AudioClip,soundAndwerIncorrect:cc.AudioClip,bgmPlayingID:null,qaList:{default:null,type:Object},qaRandomNum:0,AnswerInCorrect_Event_Handler:{default:null,type:cc.Component.EventHandler}},onLoad:function(){window.game=this,cc.log("onLoad"),this.initBg(),this.setTouch(),this.gameReady.active=!0,this.gamePlaying.active=!1,this.gamePause.active=!1,this.gamePopup.active=!1,this.gameOver.active=!1,this.asteroidTime=0,this.asteroidPool=new cc.NodePool,this.bulletTime=0,this.bulletPool=new cc.NodePool,this.enemyTime=0,this.enemyPool_1=new cc.NodePool,this.enemyPool_2=new cc.NodePool,this.enemyPool_3=new cc.NodePool,this.gamePause.zIndex=2,this.gamePopup.zIndex=2,this.gameOver.zIndex=3,this.GameTypeReady=0,this.GameTypePlaying=1,this.GameTypePause=2,this.GameTypePopup=3,this.GameTypeOver=4,this.gameType=this.GameTypeReady,this.qaList=this.getQAList(),cc.director.getCollisionManager().enabled=!0,this.randomNum=[60,90,100],this.scoreNum=0,this.bestScoreNum=cc.sys.localStorage.getItem("bestScore"),null===this.bestScoreNum&&(this.bestScoreNum=0),this.addScore(0),this.gameTime=0,this.bgmPlayingID=cc.audioEngine.play(this.bgm,!0,1),cc.audioEngine.setVolume(this.bgmPlayingID,.3)},start:function(){cc.log("start")},initBg:function(){this.isBgMove=!1,this.bg_1.y=0,this.bg_2.y=this.bg_1.y+this.bg_1.height,this.bg_comet_time=0,this.bg_comet.x=530,this.bg_comet.y=570,this.bg_star_red_time=0,this.bg_star_red.x=-350,this.bg_star_red.y=1e3,this.bg_star_red.width=1e3,this.bg_star_red.height=1e3},setTouch:function(){this.node.on("touchstart",function(){this.gameReady.active=!1,this.gamePlaying.active=!0,this.isBgMove=!0,this.gameType===this.GameTypeReady&&(this.gameType=this.GameTypePlaying)},this),this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var t=this.hero.getPosition(),i=e.getDelta(),n=cc.v2(t.x+i.x,t.y+i.y);n.x<-290?n.x=-290:n.x>290&&(n.x=290),n.y<-533?n.y=-533:n.y>533&&(n.y=533),this.hero.setPosition(n)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(){},this)},getQAList:function(){return[{question:"\u3010\u4e00\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"January"},{question:"\u3010\u4e8c\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"February"},{question:"\u3010\u4e09\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"March"},{question:"\u3010\u56db\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"April"},{question:"\u3010\u4e94\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"May"},{question:"\u3010\u516d\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"June"},{question:"\u3010\u4e03\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"July"},{question:"\u3010\u516b\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"August"},{question:"\u3010\u4e5d\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"September"},{question:"\u3010\u5341\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"October"},{question:"\u3010\u5341\u4e00\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"November"},{question:"\u3010\u5341\u4e8c\u6708\u3011\u7528\u82f1\u6587\u600e\u4e48\u8bf4\uff1f",answer:"December"}]},addScore:function(e){this.scoreNum=this.scoreNum+e,this.lab_score.string=this.scoreNum,this.bestScoreNum<this.scoreNum&&(this.bestScoreNum=this.scoreNum,cc.sys.localStorage.setItem("bestScore",this.bestScoreNum)),this.lab_bestScore.string=this.bestScoreNum},startPopup:function(){this.scoreNum>0&&this.scoreNum%350==0&&(this.gamePopup.active=!0,this.gameType=this.GameTypePopup,this.qaRandomNum=Math.floor(Math.random()*(this.qaList.length-1)),cc.log("popup - game",this.qaRandomNum),this.lab_question.string=this.qaList[this.qaRandomNum].question,this.editbox_answer.textLabel.string="",cc.audioEngine.pause(this.bgmPlayingID))},onGameOver:function(){this.lab_final_score.string=this.lab_score.string,cc.audioEngine.stop(this.bgmPlayingID),this.gameOver.active=!0,this.gamePause.active=!1,this.gamePopup.active=!1},playSoundEnemyDie:function(){cc.audioEngine.play(this.soundDieEnemy,!1,1)},playSoundHeroDie:function(){cc.audioEngine.play(this.soundDieHero,!1,1)},playSoundAnswerIncorrect:function(){cc.audioEngine.play(this.soundAndwerIncorrect,!1,1)},playSoundAnswerCorrect:function(){cc.audioEngine.play(this.soundAndwerCorrect,!1,1)},onSubmitAnswer:function(){cc.log("Answer you type...",this.editbox_answer.textLabel.string),cc.log("Question...",this.qaList[this.qaRandomNum].question),cc.log("Answer...",this.qaList[this.qaRandomNum].answer),this.isAnswerCorrect(this.editbox_answer.textLabel.string,this.qaList[this.qaRandomNum].answer)?(cc.log("Correct..."),this.playSoundAnswerCorrect(),this.editbox_answer.textLabel.string="",this.gameType=this.GameTypePlaying,this.gamePopup.active=!1,this.gamePause.active=!1,this.gameOver.active=!1,this.addScore(1e3),cc.audioEngine.resume(this.bgmPlayingID)):(cc.log("Incorrect..."),this.playSoundAnswerIncorrect(),this.editbox_answer.textLabel.string="",this.AnswerInCorrect_Event_Handler.emit())},isAnswerCorrect:function(e,t){return e===t},clickBtn:function(e,t){switch(t){case"pause":cc.log("clicked!"),this.gamePause.active=!0,this.gameType=this.GameTypePause,cc.audioEngine.pause(this.bgmPlayingID);break;case"continue":cc.log("continue!"),this.gamePause.active=!1,this.gameType=this.GameTypePlaying,cc.audioEngine.resume(this.bgmPlayingID);break;case"restart":cc.log("restart!"),this.bgmPlayingID=cc.audioEngine.play(this.bgm,!0,1),cc.audioEngine.setVolume(this.bgmPlayingID,.3),this.gameTime=0,this.scoreNum=0,this.addScore(0),this.gameType=this.GameTypePlaying,this.gamePopup.active=!1,this.gamePause.active=!1,this.gameOver.active=!1,this.removeAllBullet(),this.removeAllEnemy(),this.hero.setPosition(cc.v2(0,-350)),(i=this.hero.getComponent("Hero"))&&i.init();break;case"home":var i;cc.log("home!"),this.bgmPlayingID=cc.audioEngine.play(this.bgm,!0,1),cc.audioEngine.setVolume(this.bgmPlayingID,.3),this.gameTime=0,this.scoreNum=0,this.addScore(0),this.gameType=this.GameTypeReady,this.gameOver.active=!1,this.gamePopup.active=!1,this.gamePause.active=!1,this.gamePlaying.active=!1,this.gameReady.active=!0,this.isBgMove=!1,this.removeAllBullet(),this.removeAllEnemy(),this.hero.setPosition(cc.v2(0,-350)),(i=this.hero.getComponent("Hero"))&&i.init()}},setBg:function(){this.bg_1.y<=-this.bg_1.height&&(this.bg_1.y=this.bg_2.y+this.bg_2.height),this.bg_2.y<=-this.bg_2.height&&(this.bg_2.y=this.bg_1.y+this.bg_1.height),this.bg_1.y=this.bg_1.y-.5,this.bg_2.y=this.bg_2.y-.5},setBgComet:function(e){this.bg_comet.x=this.bg_comet.x-e,this.bg_comet.y=this.bg_comet.y-.77*e},setBgStarRed:function(){this.bg_star_red.y=this.bg_star_red.y-1},setBgDust:function(){this.bg_dust_blue.y=this.bg_dust_blue.y-.5,this.bg_dust_yellow.y=this.bg_dust_yellow.y-.5},createBullet:function(){var e=null;(e=this.bulletPool.size()>0?this.bulletPool.get():cc.instantiate(this.pre_bullet)).parent=this.node;var t=this.hero.getPosition();e.setPosition(cc.v2(t.x,t.y+this.hero.height/2+5))},onBulletKilled:function(e){this.bulletPool.put(e)},removeAllBullet:function(){for(var e=this.node.children,t=e.length-1;t>=0;t--)e[t].getComponent("Bullet")&&this.onBulletKilled(e[t])},removeAllEnemy:function(){for(var e=this.node.children,t=e.length-1;t>=0;t--)e[t].getComponent("Enemy_1")?game.onEnemyKilled(e[t],1):e[t].getComponent("Enemy_2")?game.onEnemyKilled(e[t],2):e[t].getComponent("Enemy_3")&&game.onEnemyKilled(e[t],3)},createAsteroid:function(){cc.log("createAsteroid..."),cc.log(this.asteroidPool.size());var e=null,t=cc.v2(0,0);e=this.asteroidPool.size()>0?this.asteroidPool.get():cc.instantiate(this.pre_asteroid),t.x=13,t.y=620,e.parent=this.node;var i=e.getComponent("Asteroid");cc.log(e),i&&(cc.log("componet Asteroid exists..."),i.init()),e.setPosition(t)},createEnemy:function(e){cc.log("createEnemy...",e);var t=null,i="",n=cc.v2(0,0);1===e?(t=this.enemyPool_1.size()>0?this.enemyPool_1.get():cc.instantiate(this.pre_enemy_1),i="Enemy_1",n.x=640*Math.random()-320,n.y=666+200*Math.random()):2===e?(this.enemyPool_2.size()>0?t=this.enemyPool_2.get():(cc.log("pre"),t=cc.instantiate(this.pre_enemy_2),cc.log(t)),i="Enemy_2",cc.log(t),n.x=640*Math.random()-320,n.y=666+200*Math.random()):3===e&&(this.enemyPool_3.size()>0?t=this.enemyPool_3.get():(cc.log("pre"),t=cc.instantiate(this.pre_enemy_3),cc.log(t)),i="Enemy_3",cc.log(t),n.x=600*Math.random()-300,n.y=740+200*Math.random()),t.parent=this.node;var o=t.getComponent(i);cc.log(o),o&&(cc.log("componet "+i+" exists..."),o.init()),t.setPosition(n)},onEnemyKilled:function(e,t){1===t?this.enemyPool_1.put(e):2===t?this.enemyPool_2.put(e):3===t&&this.enemyPool_3.put(e)},onAsteroidKilled:function(e){this.asteroidPool.put(e)},update:function(){this.isBgMove&&(this.bg_comet_time++,this.bg_star_red_time++,this.setBg(),this.bg_comet_time>1e3&&this.setBgComet(1),this.bg_star_red_time>500&&this.setBgStarRed(),this.setBgDust());var e=5;if(this.gameType===this.GameTypePlaying&&(this.gameTime++,this.gameTime%300==0&&((e+=Math.round(this.gameTime/300))>20&&(e=20),this.randomNum[0]=this.randomNum[0]-2,this.randomNum[1]=this.randomNum[1]-1,this.randomNum[0]<40&&(this.randomNum[0]=40),this.randomNum[1]<70&&(this.randomNum[1]=70))),this.bulletTime++,8===this.bulletTime&&(this.bulletTime=0,this.gameType===this.GameTypePlaying&&this.createBullet()),this.enemyTime++,120===this.enemyTime){this.enemyTime=0;for(var t=Math.floor(Math.random()*e)+1,i=0;i<t;i++)if(game.gameType===game.GameTypePlaying||game.gameType===game.GameTypeOver){var n=100*Math.random();n<this.randomNum[0]?this.createEnemy(1):n<this.randomNum[1]?this.createEnemy(2):n<this.randomNum[2]&&this.createEnemy(3)}}this.asteroidTime++,200===this.asteroidTime&&(this.asteroidTime=0,game.gameType!==game.GameTypePlaying&&game.gameType!==game.GameTypeOver||this.createAsteroid())},getAllUsers:function(){cc.log("getAllUsers...");var e=new XMLHttpRequest;e.open("GET","http://localhost/api/records/users/",!0),e.onload=function(){var t=JSON.parse(e.responseText);4==e.readyState&&"200"==e.status?cc.console(t):cc.error(t)},e.send(null)},getSingleUser:function(e){cc.log("getSingleUser..."+e);var t="http://localhost/api/records/users/"+e,i=new XMLHttpRequest;i.open("GET",t,!0),i.onload=function(){var e=JSON.parse(i.responseText);4==i.readyState&&"200"==i.status?cc.log("getSingleUser..."+e):cc.error(e)},i.send(null)},createNewUser:function(e){cc.log("postNewUser..."+e);var t={};t.name=e;var i=JSON.stringify(t),n=new XMLHttpRequest;n.open("POST","http://localhost/api/records/users",!0),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.onload=function(){var e=JSON.parse(n.responseText);cc.log(n.readyState+":"+n.status),4==n.readyState&&"200"==n.status?cc.log("createNewUser ... "+e):cc.error(e)},n.send(i)},updateScore:function(e,t){cc.log("postNewUser..."+e+":"+t);var i="http://localhost/api/records/users/"+e,n={};n.score=t;var o=JSON.stringify(n),s=new XMLHttpRequest;s.open("PUT",i,!0),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.onload=function(){var e=JSON.parse(s.responseText);4==s.readyState&&"200"==s.status?cc.log("updateScore..."+e):cc.error(e)},s.send(o)},updateEnable:function(e,t){cc.log("updateEnable..."+e+":"+t);var i="http://localhost/api/records/users/"+e,n={};n.enable=t;var o=JSON.stringify(n),s=new XMLHttpRequest;s.open("PUT",i,!0),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.onload=function(){var e=JSON.parse(s.responseText);4==s.readyState&&"200"==s.status?cc.log("updateEnable..."+e):cc.error(e)},s.send(o)}}),cc._RF.pop()},{}],Gg:[function(e,t){"use strict";cc._RF.push(t,"0d81f5bzQ9CIafZ1+IBX7ph","Gg"),cc.Class({extends:cc.Component,properties:{label_num:cc.Label},onLoad:function(){cc.director.preloadScene("Game",function(){cc.warn("Next scene preloaded")}),this.timeNum=5,this.label_num.string=this.timeNum,this.schedule(function(){this.timeNum--,this.label_num.string=this.timeNum,0===this.timeNum&&this.goToGame()},1)},goToGame:function(){cc.director.loadScene("Game")},update:function(){}}),cc._RF.pop()},{}],Hero:[function(e,t){"use strict";cc._RF.push(t,"7b5a91Pf5FBzIyeQ0mTG/hn","Hero"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.init()},onCollisionEnter:function(e,t){10===t.tag&&!1===this.isDie&&(this.isDie=!0,game.gameType=game.GameTypeOver,this.die())},init:function(){this.node.active=!0,this.isDie=!1,this.normal()},normal:function(){this.getComponent(cc.Animation).play("heroNormal")},die:function(){game.playSoundHeroDie();var e=this.getComponent(cc.Animation);e.play("heroDie"),e.over=function(){this.node.active=!1,game.onGameOver()}.bind(this)},update:function(){}}),cc._RF.pop()},{}]},{},["Asteroid","Bullet","Enemy_1","Enemy_2","Enemy_3","Game","Gg","Hero"]);